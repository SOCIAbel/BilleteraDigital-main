<div class="container">

  <div class="header">
    <h2>Subcategorías</h2>

    <div class="btns">
      <button mat-raised-button color="primary" (click)="openCreateDialog(dialogTemplate)">
        + Agregar
      </button>

      <button mat-raised-button color="accent" (click)="goBack()">
        ← Volver
      </button>
    </div>
  </div>

  <!-- DIALOG -->
  <ng-template #dialogTemplate>
    <h2 mat-dialog-title>Subcategoría</h2>

    <div mat-dialog-content>
      <mat-form-field appearance="outline" class="field">
        <mat-label>Nombre</mat-label>
        <input matInput [(ngModel)]="form.name">
      </mat-form-field>
    </div>

    <div mat-dialog-actions align="end">
      <button mat-button (click)="dialogRef.close()">Cancelar</button>
      <button mat-raised-button color="primary" (click)="saveSubcategory()">
        Guardar
      </button>
    </div>

  </ng-template>

  <!-- TABLA -->
  <table mat-table [dataSource]="subcategories" class="mat-elevation-z8 table">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let s">{{ s.id }}</td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Nombre</th>
      <td mat-cell *matCellDef="let s">{{ s.name }}</td>
    </ng-container>

    <ng-container matColumnDef="createdAt">
      <th mat-header-cell *matHeaderCellDef>Fecha</th>
      <td mat-cell *matCellDef="let s">{{ s.createdAt | date:'short' }}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Acciones</th>
      <td mat-cell *matCellDef="let s">
        <button class="action delete" (click)="deleteSubcategory(s.id)">Eliminar</button>
        <button class="action update" (click)="openEditDialog(dialogTemplate, s)">Editar</button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

  </table>

</div>
